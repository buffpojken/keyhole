<h1>Edit <%= @session.name %></h1>
<form action="/configure/session/<%= @session.id %>/edit" method="post">
	<input type="text" name="session[name]" value="<%= @session.name %>" />
	<br /><br />
	<input type="submit" value="Update" /> or <a href="/configure">back</a>
	<br /><br />
	<h2>Connected Devices</h2>
	<ul class="device-list">
		<% @session.devices.each do |device| %>
			<li>
				<%= device.name %>
				<div style="width:30px; height:30px;border:1px solid black;" id="colorSelector"><div style="width:100%; height:100%"></div></div>
				<a href="/configure/device/<%= device.id%>/disconnect">remove</a>
			</li>	
		<% end %>
	</ul>	
	<br /><br />
	<h2>Unconnected Devices</h2>
	<ul class="device-list">
		<% @devices.each do |device| %>
			<li>
				<%= device.name %>
				<a href="/configure/device/<%= device.id%>/connect/<%= @session.id %>">add</a>
			</li>	
		<% end %>
	</ul>	
	<br /><br />
</form>

<% content_for :javascripts do %>
	<link rel="stylesheet" href="/colorpicker/stylesheets/colorpicker.css" type="text/css" />


	<script type="text/javascript" src="/colorpicker/js/colorpicker.js"></script>
	<script type="text/javascript" src="/colorpicker/js/eye.js"></script>
	<script type="text/javascript" src="/colorpicker/js/utils.js"></script>
	<script type="text/javascript" src="/colorpicker/js/layout.js"></script>

	<script type="text/javascript">	
		$(document).ready(function(e){
			$('#colorSelector').ColorPicker({
				color: '#0000ff',
				onShow: function (colpkr) {
					$(colpkr).fadeIn(500);
					return false;
				},
				onHide: function (colpkr) {					
					$(colpkr).fadeOut(500);	
					return false;
				},
				onChange: function (hsb, hex, rgb) {					
					$('#colorSelector div').css('background-color', '#' + hex);

				}
			});
		});	
	</script>

<% end %>

